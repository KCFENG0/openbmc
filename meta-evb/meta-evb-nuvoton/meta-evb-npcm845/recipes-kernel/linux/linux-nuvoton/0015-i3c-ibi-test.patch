From 05a80e8910e231a1f482b5a4c863d5dbefd61abf Mon Sep 17 00:00:00 2001
From: Stanley Chu <yschu@nuvoton.com>
Date: Wed, 28 Sep 2022 10:16:09 +0800
Subject: [PATCH] i3c ibi test

Signed-off-by: Stanley Chu <yschu@nuvoton.com>
---
 arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts | 4 ++--
 drivers/i3c/master/svc-i3c-master.c                 | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts
index aa15428b67e5..d45c1c050dad 100644
--- a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts
+++ b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-evb.dts
@@ -516,10 +516,10 @@
 				status = "okay";
 				i2c-scl-hz = <400000>;
 				i3c-scl-hz = <4000000>;
-				sensor0@0x5c {
+				/*sensor0@0x5c {
 					compatible = "st,lps22hh";
 					reg = <0x5c 0x0 0x20>;
-				};
+				};*/
 			};
 
 			i3c1: i3c@fff11000 {
diff --git a/drivers/i3c/master/svc-i3c-master.c b/drivers/i3c/master/svc-i3c-master.c
index 62f00e4e5b77..a251bd44141d 100644
--- a/drivers/i3c/master/svc-i3c-master.c
+++ b/drivers/i3c/master/svc-i3c-master.c
@@ -501,7 +501,7 @@ static int svc_i3c_master_bus_init(struct i3c_master_controller *m)
 	/* Simple configuration for OD: high=pp_high, low=200ns */
 	odhpp = 1;
 	pp_high_period = (ppbaud + 1) * fclk_period_ns;
-	odbaud = DIV_ROUND_UP(200, pp_high_period) - 1;
+	odbaud = DIV_ROUND_UP(1000, pp_high_period) - 1;
 	od_low_period = (odbaud + 1) * pp_high_period;
 
 	/* calcuate i2c_baud */
-- 
2.17.1

